(()=>{"use strict";const e=(e,o,t,l,a,r,n,d)=>{e.image(o,a*t*l,r*t*l,t*l,t*l,n,d,t,t)},o=Math.pow(2,0),t=Math.pow(2,1),l=Math.pow(2,2),a=Math.pow(2,3),r=Math.pow(2,4),n=Math.pow(2,5),d=Math.pow(2,6),s=Math.pow(2,7),h={2:1,8:2,10:3,11:4,16:5,18:6,22:7,24:8,26:9,27:10,30:11,31:12,64:13,66:14,72:15,74:16,75:17,80:18,82:19,86:20,88:21,90:22,91:23,94:24,95:25,104:26,106:27,107:28,120:29,122:30,123:31,126:32,127:33,208:34,210:35,214:36,216:37,218:38,219:39,222:40,223:41,248:42,250:43,251:44,254:45,255:46,0:47};function y(e,y,p,f,k){let M=0,[u,C,v,c]=[!1,!1,!1,!1];return e[k][f]?(k>0&&e[k-1][f]&&(u=!0,M+=t),f>0&&e[k][f-1]&&(c=!0,M+=a),f<y&&e[k][f+1]&&(C=!0,M+=r),k<p&&e[k+1][f]&&(v=!0,M+=d),u&&c&&k>0&&f>0&&e[k-1][f-1]&&(M+=o),u&&C&&k>0&&f<y&&e[k-1][f+1]&&(M+=l),v&&c&&k<p&&f>0&&e[k+1][f-1]&&(M+=n),v&&C&&f<y&&k<p&&e[k+1][f+1]&&(M+=s),h[M]):0}const p=16;let f=.05,k=0,M=0,u=1,C=60,v=40,c=C*p,m=v*p;const i=Math.floor(4e4*Math.random());let w=0,g=[],R=[],x=[];new p5((function(o){o.preload=()=>{g=o.loadImage("./assets/tileset.png"),R=o.loadImage("./assets/summerTrees.png")},o.setup=()=>{o.createCanvas(c,m),o.noLoop(),o.background(255),o.noiseSeed(i);for(let e=0;e<6;e++)for(let o=0;o<8;o++)x.push({x:16*o,y:16*e})},o.draw=()=>{let t=((e,o,t,l,a,r,n)=>{let d={level1:[],level2:[]};for(let s=0;s<l;s+=1){let l={level1:[],level2:[]};for(let d=0;d<t;d+=1){let t=a*d+r,h=a*s+n,y=e.noise(t,h)+o,p=Math.floor(2*y),f=Math.floor(10*Math.random()),k=!1;y>.7&&y<1&&1===f&&(k={tree:{x:Math.floor(3*Math.random()),y:0}}),y>.6&&y<.61&&2===f&&(k={stone:{x:Math.floor(8*Math.random()),y:Math.floor(2*Math.random())}}),l.level1.push(p),l.level2.push(k)}d.level1.push(l.level1),d.level2.push(l.level2)}return d})(o,w,C,v,f,k,M),l=function(e){const o=[],t=e.length,l=e[0].length,a=l-1,r=t-1;for(let n=0;n<t;n++){o[n]=[];for(let t=0;t<l;t++)o[n][t]=y(e,a,r,t,n)}return o}(t.level1);for(let a=0;a<v;a+=1)for(let r=0;r<C;r+=1){let n=l[a][r],d=t.level2[a][r];e(o,g,p,u,r,a,x[n].x,x[n].y),d.stone&&o.image(R,r*p*u,a*p*u,p*u,p*u,d.stone.x*p,d.stone.y*p+48,p,p),d.tree&&o.image(R,r*p*u-p,a*p*u-32,48*u,48*u,d.tree.x*p*3,d.tree.y,48,48)}},o.keyPressed=e=>{console.log(u),37===o.keyCode?k-=20*f:o.keyCode===o.RIGHT_ARROW?k+=20*f:o.keyCode===o.DOWN_ARROW?M+=20*f:o.keyCode===o.UP_ARROW?M-=20*f:107===o.keyCode?f/=2:109===o.keyCode?f*=2:51===o.keyCode&&u>.125?(u/=2,C*=2,v*=2):52===o.keyCode?(u*=2,C/=2,v/=2):49===o.keyCode&&u>.125?(f/=2,u/=2,C*=2,v*=2):50===o.keyCode?(f*=2,u*=2,C/=2,v/=2):53===o.keyCode?w-=.01:54===o.keyCode&&(w+=.01),o.redraw()}})),document.addEventListener("keydown",(function(e){37!=e.keyCode&&38!=e.keyCode&&39!=e.keyCode&&40!=e.keyCode||e.preventDefault()}),!1)})();